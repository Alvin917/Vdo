webpackJsonp([1,2],[,,,,,,,,,,,function(t,a,e){"use strict";e.d(a,"d",function(){return s}),e.d(a,"e",function(){return n}),e.d(a,"c",function(){return i}),e.d(a,"b",function(){return r}),e.d(a,"a",function(){return o});var s="CHANGE_MOVIES_TAB",n="FETCH_MOVIES",i="FETCH_MOVIES_QUERY",r="CLEAR_MOVIES_QUERY",o="UPDATE_MOVIE_SEARCH_STEP"},,,,,,,,,,,,,,,function(t,a,e){"use strict";var s=e(10),n=e.n(s),i=e(136),r=e.n(i),o=e(44),c=e.n(o),u=e(126),l=e.n(u),v=e(125),f=e.n(v),m=e(124),d=e.n(m),_=e(127),p=e.n(_);n.a.use(r.a),a.a=new r.a({mode:"history",routes:[{path:"/test",component:p.a},{path:"/",redirect:"/movie/home",name:"Home",component:c.a},{path:"/movie/home",name:"MovieHome",component:l.a},{path:"/movie/subject/:id",name:"MovieSubject",component:f.a},{path:"/movie/search",name:"MovieSearch",component:d.a},{path:"/*",redirect:"/"}]})},,,,,,function(t,a,e){"use strict";function s(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.city,n=void 0===s?"广州":s,i=a.start,o=void 0===i?0:i;return e.i(r.a)("movie/"+t,{city:n,start:o})}function n(t){var a=t.q,s=t.start,n=void 0===s?0:s;return e.i(r.a)("/movie/search",{q:a,start:n})}function i(t){return e.i(r.a)("movie/subject/"+t)}var r=e(68);e.d(a,"d",function(){return o}),a.b=s,a.c=n,a.a=i;var o={inTheaters:"in_theaters",comingSoon:"coming_soon"}},,,,,,,,,,,,function(t,a,e){var s=e(3)(null,e(131),null,null);t.exports=s.exports},function(t,a,e){"use strict";var s=e(16),n=e(10),i=e.n(n),r=e(69);i.a.use(s.b),a.a=new s.b.Store({modules:{movie:r.a}})},function(t,a){},function(t,a){},,function(t,a,e){e(118);var s=e(3)(e(70),e(133),null,null);t.exports=s.exports},,,,,,,,,,,,,,,,,,,function(t,a,e){"use strict";var s=e(77),n=e.n(s),i=e(50),r=e.n(i),o="/api/";a.a=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new n.a(function(e,s){r.a.get(o+t,{params:a}).then(function(t){e(t.data)}).catch(function(t){return s(t)})})}},function(t,a,e){"use strict";var s,n,i,r=e(78),o=e.n(r),c=e(11),u=e(32),l=(s={},o()(s,c.e,function(t,a){t.movies[a.type].subjects=t.movies[a.type].subjects.concat(a.subjects),t.movies[a.type].total=t.movies[a.type].subjects.length}),o()(s,c.c,function(t,a){console.log("111"),t.movieQuery.subjects=a.data.subjects,console.log("222"),t.movieQuery.total=t.movieQuery.subjects.length,console.log("333")}),o()(s,c.b,function(t){t.movieQuery.total=0,console.log("444"),t.movieQuery.subjects=[],console.log("555")}),o()(s,c.d,function(t,a){t.tab=a}),o()(s,c.a,function(t,a){t.searchStep=a}),s),v=(n={},o()(n,c.e,function(t,a){u.b(a.type,{start:a.start||0}).then(function(e){return t.commit(c.e,{type:a.type,subjects:e.subjects})})}),o()(n,c.c,function(t,a){u.c({q:a.q}).then(function(e){return t.commit(c.c,{data:e,q:a.q})})}),o()(n,c.b,function(t){t.commit(c.b)}),o()(n,c.d,function(t,a){t.commit(c.d,a)}),o()(n,c.a,function(t,a){t.commit(c.a,a)}),n);a.a={state:{movies:(i={},o()(i,u.d.inTheaters,{total:0,subjects:[],describe:""}),o()(i,u.d.comingSoon,{total:0,subjects:[],describe:""}),i),movieQuery:{total:0,subjects:[],describe:"",q:""},tab:"in_theaters",searchStep:1},mutations:l,actions:v}},function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e(44),n=e.n(s),i=e(122),r=e.n(i);a.default={name:"app",components:{Home:n.a,Copyright:r.a}}},function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e(16),n=e(11);a.default={name:"movieList",data:function(){return{}},props:["tabName"],computed:e.i(s.a)({subjects:function(t){return t.movie.movies[this.tabName].subjects}}),mounted:function(){this.fetchData()},beforeUpdate:function(){console.log("[beforeUpdate], tabName: "+this.tabName),this.fetchData()},destroyed:function(){console.log("[destroyed]")},methods:{ratingStar:function(t){var a=Math.round(t),e=Math.floor(a/2),s=a%2,n=5-e-s;return{star:e,half:s,left:n}},fetchData:function(){this.$store.state.movie.movies[this.tabName].subjects&&this.$store.state.movie.movies[this.tabName].subjects.length>0||this.$store.dispatch(n.e,{type:this.tabName})}}}},function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e(16),n=e(11);a.default={name:"movieSearch",data:function(){return{count:20,start:0,total:0,q:""}},computed:e.i(s.a)({subjects:function(t){return t.movie.movieQuery.subjects},text:function(t){return t.movie.movieQuery.q}}),mounted:function(){console.log("search mounted-------"+Math.random()),this.getQuery()},watch:{$route:"getQuery"},methods:{ratingStar:function(t){var a=Math.round(t),e=Math.floor(a/2),s=a%2,n=5-e-s;return{star:e,half:s,left:n}},gotoTab:function(){this.$router.go(-this.$store.state.movie.searchStep),this.$store.dispatch(n.a,1),this.$store.dispatch(n.b)},search:function(){console.log("q",this.q),0!==(""+this.q).length&&(this.$store.dispatch(n.a,this.$store.state.movie.searchStep+1),this.$router.push({name:"MovieSearch",query:{q:this.q}}))},getQuery:function(){this.$route.query.q&&this.$route.query.q!==this.$store.state.movie.movieQuery.q&&(console.log("dispatch..."),this.$store.dispatch(n.c,{q:this.$route.query.q}))}}}},function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e(26),n=e(32);a.default={name:"movieSubject",data:function(){return{movie:{rating:{},images:{},countries:[],genres:[],casts:[],directors:[],aka:[]}}},watch:{$route:function(t){this.setPage(t.params.id)}},mounted:function(){this.setPage(this.$route.params.id)},methods:{ratingStar:function(t){if(!t)return{star:0,half:0,left:0};var a=Math.round(t),e=Math.floor(a/2),s=a%2,n=5-e-s;return{star:e,half:s,left:n}},goBack:function(){s.a.go(-1)},setPage:function(t){var a=this;e.i(n.a)(t).then(function(t){a.movie=t})}}}},function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e(16),n=e(123),i=e.n(n),r=e(11);a.default={data:function(){return{}},components:{Card:i.a},computed:e.i(s.a)({activeTab:function(t){return t.movie.tab}}),methods:{handleTabChange:function(t){this.$store.dispatch(r.d,t)},handleActive:function(t){console.log("---------tab active-------------"+t)},gotoSearch:function(){this.$router.push({name:"MovieSearch"})}}}},function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{isLoading:!0}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,a){},function(t,a){},function(t,a){},function(t,a){},function(t,a){},function(t,a){},function(t,a){},,function(t,a,e){e(115);var s=e(3)(null,e(129),"data-v-29af4a6d",null);t.exports=s.exports},function(t,a,e){e(119);var s=e(3)(e(71),e(134),"data-v-9e01580e",null);t.exports=s.exports},function(t,a,e){e(117);var s=e(3)(e(72),e(132),"data-v-5c51e251",null);t.exports=s.exports},function(t,a,e){e(116);var s=e(3)(e(73),e(130),"data-v-2cba75d3",null);t.exports=s.exports},function(t,a,e){e(120);var s=e(3)(e(74),e(135),null,null);t.exports=s.exports},function(t,a,e){e(114);var s=e(3)(e(75),e(128),"data-v-0badfddc",null);t.exports=s.exports},function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"loading"},[e("mu-infinite-scroll",{attrs:{loading:t.isLoading,loadingText:""}})],1)},staticRenderFns:[]}},function(t,a){t.exports={render:function(){var t=this,a=t.$createElement;t._self._c||a;return t._m(0)},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"footer"},[t._v("\r\nPowered By RalfZ\r\n"),e("br"),t._v("\r\n©2017\r\n")])}]}},function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{position:"relative"}},[e("mu-icon-button",{staticClass:"icon-back",attrs:{icon:"arrow_back"},on:{click:function(a){t.goBack()}},slot:"left"}),t._v(" "),e("div",{staticClass:"image-wrap",style:"background-image: url("+t.movie.images.large+")"}),t._v(" "),e("div",{staticClass:"title-border"},[e("div",{staticClass:"title-info"},[e("div",{staticClass:"title-image"},[e("img",{attrs:{src:t.movie.images.large}})]),t._v(" "),e("div",{staticClass:"title-text"},[e("p",[t._v(t._s(t.movie.title))]),t._v(" "),e("p",[t._v(t._s(t.movie.rating.average))])])])]),t._v(" "),e("div",{staticClass:"star"},[t._l(t.ratingStar(t.movie.rating.average).star,function(t){return e("mu-icon",{staticClass:"star-icon",attrs:{size:36,value:"star"}})}),t._v(" "),t._l(t.ratingStar(t.movie.rating.average).half,function(t){return e("mu-icon",{staticClass:"star-icon",attrs:{size:36,value:"star_half"}})}),t._v(" "),t._l(t.ratingStar(t.movie.rating.average).left,function(t){return e("mu-icon",{staticClass:"star-icon",attrs:{size:36,value:"star_border"}})})],2),t._v(" "),e("div",{staticClass:"info"},[e("p",{staticClass:"info-content"},[e("span",{staticClass:"info-title"},[t._v("原名")]),e("span",{staticClass:"info-text"},[t._v(t._s(t.movie.original_title))])]),t._v(" "),e("p",{staticClass:"info-content"},[e("span",{staticClass:"info-title"},[t._v("类型")]),e("span",{staticClass:"info-text"},[t._v(t._s(t._f("arr2string")(t.movie.genres)))])]),t._v(" "),e("p",{staticClass:"info-content"},[e("span",{staticClass:"info-title"},[t._v("年代")]),e("span",{staticClass:"info-text"},[t._v(t._s(t.movie.year))])]),t._v(" "),e("p",{staticClass:"info-content"},[e("span",{staticClass:"info-title"},[t._v("地区")]),e("span",{staticClass:"info-text"},[t._v(t._s(t._f("arr2string")(t.movie.countries)))])]),t._v(" "),e("p",{staticClass:"info-content"},[e("span",{staticClass:"info-title"},[t._v("又名")]),e("span",{staticClass:"info-text"},[t._v(t._s(t._f("arr2string")(t.movie.aka)))])]),t._v(" "),e("p",{staticClass:"info-content"},[e("span",{staticClass:"info-title"},[t._v("想看人数")]),e("span",{staticClass:"info-text"},[t._v(t._s(t.movie.wish_count))])]),t._v(" "),e("p",{staticClass:"info-content"},[e("span",{staticClass:"info-title"},[t._v("看过人数")]),e("span",{staticClass:"info-text"},[t._v(t._s(t.movie.collect_count))])]),t._v(" "),e("p",{staticClass:"info-content"},[e("span",{staticClass:"info-title"},[t._v("评分人数")]),e("span",{staticClass:"info-text"},[t._v(t._s(t.movie.ratings_count))])]),t._v(" "),e("p",{staticClass:"info-content"},[e("span",{staticClass:"info-title"},[t._v("短评数量")]),e("span",{staticClass:"info-text"},[t._v(t._s(t.movie.comments_count))])]),t._v(" "),e("p",{staticClass:"info-content"},[e("span",{staticClass:"info-title"},[t._v("影评数量")]),e("span",{staticClass:"info-text"},[t._v(t._s(t.movie.reviews_count))])])]),t._v(" "),e("div",{staticClass:"summary"},[t._v(t._s(t.movie.summary))]),t._v(" "),e("div",{staticClass:"author"},[e("p",{staticClass:"author-type"},[t._v("导演")]),t._v(" "),e("mu-row",t._l(t.movie.directors,function(a){return e("mu-col",{staticClass:"author-elem",attrs:{width:"50",tablet:"33",desktop:"25"}},[e("mu-paper",[e("div",{staticClass:"author-wrap"},[e("div",{staticClass:"author-image"},[e("div",{staticClass:"author-padding",style:"background-image: url("+(a.avatars&&a.avatars.large||"")+")"})]),t._v(" "),e("div",{staticClass:"author-name"},[t._v(t._s(a.name))])])])],1)}))],1),t._v(" "),e("div",{staticClass:"author"},[e("p",{staticClass:"author-type"},[t._v("主演")]),t._v(" "),e("mu-row",t._l(t.movie.casts,function(a){return e("mu-col",{staticClass:"author-elem",attrs:{width:"50",tablet:"33",desktop:"25"}},[e("mu-paper",[e("div",{staticClass:"author-wrap"},[e("div",{staticClass:"author-image"},[e("div",{staticClass:"author-padding",style:"background-image: url("+(a.avatars&&a.avatars.large||"")+")"})]),t._v(" "),e("div",{staticClass:"author-name"},[t._v(t._s(a.name))])])])],1)}))],1)],1)},staticRenderFns:[]}},function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("router-view")],1)},staticRenderFns:[]}},function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"search"}},[e("mu-paper",{staticClass:"demo-paper",attrs:{zDepth:1}},[e("mu-appbar",{staticClass:"search-bar",attrs:{title:"Title"}},[e("mu-icon-button",{staticClass:"bar-icon",attrs:{icon:"arrow_back"},on:{click:function(a){t.gotoTab()}},slot:"left"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.q,expression:"q",modifiers:{trim:!0}}],staticClass:"bar-text",attrs:{autofocus:"true",underlineShow:!1,hintText:"请输入关键字"},domProps:{value:t.text,value:t._s(t.q)},on:{keyup:function(a){t._k(a.keyCode,"enter",13)||t.search(a)},input:function(a){a.target.composing||(t.q=a.target.value.trim())},blur:function(a){t.$forceUpdate()}}}),t._v(" "),e("mu-icon-button",{staticClass:"bar-icon",attrs:{icon:"close"},slot:"right"})],1)],1),t._v(" "),e("div",{staticClass:"result"},t._l(t.subjects,function(a){return e("router-link",{attrs:{to:{name:"MovieSubject",params:{id:a.id}}}},[e("mu-paper",{staticClass:"elem",attrs:{zDepth:1}},[e("div",{staticClass:"image",style:"background-image: url("+a.images.large+")"}),t._v(" "),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("span",{staticClass:"title"},[t._v(t._s(a.title))]),t._v(" "),e("span",{staticClass:"year"},[t._v(t._s(a.year))])]),t._v(" "),e("div",{staticClass:"star"},[a.rating.average>0?e("span",{staticClass:"star-box"},[t._l(t.ratingStar(a.rating.average).star,function(t){return e("mu-icon",{staticClass:"star-icon",attrs:{size:14,value:"star"}})}),t._v(" "),t._l(t.ratingStar(a.rating.average).half,function(t){return e("mu-icon",{staticClass:"star-icon",attrs:{size:14,value:"star_half"}})}),t._v(" "),t._l(t.ratingStar(a.rating.average).left,function(t){return e("mu-icon",{staticClass:"star-icon",attrs:{size:14,value:"star_border"}})})],2):t._e(),t._v(" "),e("div",{staticClass:"star-num"},[t._v(t._s(t._f("fixNum")(a.rating.average)))])]),t._v(" "),e("div",{staticClass:"genres"},[t._v("类型："+t._s(t._f("arr2string")(a.genres)))]),t._v(" "),e("div",{staticClass:"director"},[t._v("导演："+t._s(t._f("arr2string")(a.directors.map(function(t){return t.name}))))]),t._v(" "),e("div",{staticClass:"cast"},[t._v("主演："+t._s(t._f("arr2string")(a.casts.map(function(t){return t.name}))))])])])],1)}))],1)},staticRenderFns:[]}},function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("transition",{attrs:{name:"trans-opacity"}},[e("router-view")],1),t._v(" "),e("Copyright")],1)},staticRenderFns:[]}},function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"wrap"},[e("mu-row",{staticClass:"paper-row"},t._l(t.subjects,function(a){return e("mu-col",{staticClass:"paper-elem",attrs:{width:"33",tablet:"25",desktop:"20"}},[e("router-link",{attrs:{to:{name:"MovieSubject",params:{id:a.id}}}},[e("mu-paper",[e("div",{staticClass:"paper-border"},[e("div",{staticClass:"paper-img",style:"background-image: url("+a.images.large+")"})]),t._v(" "),e("div",{staticClass:"paper-text"},[e("p",[t._v(" "+t._s(a.title)+" ")]),t._v(" "),e("p",{staticClass:"star-box"},[a.rating.average>0?e("span",{staticClass:"paper-star"},[t._l(t.ratingStar(a.rating.average).star,function(t){return e("mu-icon",{staticClass:"star-icon",attrs:{value:"star"}})}),t._v(" "),t._l(t.ratingStar(a.rating.average).half,function(t){return e("mu-icon",{staticClass:"star-icon",attrs:{value:"star_half"}})}),t._v(" "),t._l(t.ratingStar(a.rating.average).left,function(t){return e("mu-icon",{staticClass:"star-icon",attrs:{value:"star_border"}})})],2):t._e(),t._v(" "),e("span",{staticClass:"paper-rating"},[t._v(t._s(t._f("fixNum")(a.rating.average))+" "),e("span")])])])])],1)],1)}))],1)},staticRenderFns:[]}},function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"tab"}},[e("mu-paper",{attrs:{zDepth:2}},[e("mu-appbar",{attrs:{title:"豆瓣电影"}},[e("mu-icon-button",{attrs:{icon:"menu"},slot:"left"}),t._v(" "),e("mu-icon-button",{attrs:{icon:"search"},on:{click:function(a){t.gotoSearch()}},slot:"right"})],1),t._v(" "),e("mu-tabs",{attrs:{value:t.activeTab},on:{change:t.handleTabChange}},[e("mu-tab",{attrs:{value:"in_theaters",title:"正在热映"},on:{active:t.handleActive}}),t._v(" "),e("mu-tab",{attrs:{value:"coming_soon",title:"即将上映"},on:{active:t.handleActive}})],1)],1),t._v(" "),"in_theaters"===t.activeTab?e("div",[e("Card",{attrs:{"tab-name":"in_theaters"}})],1):t._e(),t._v(" "),"coming_soon"===t.activeTab?e("div",[e("Card",{attrs:{"tab-name":"coming_soon"}})],1):t._e()],1)},staticRenderFns:[]}},,,,function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e(10),n=e.n(s),i=e(48),r=e.n(i),o=e(46),c=(e.n(o),e(47)),u=(e.n(c),e(49)),l=e.n(u),v=e(26),f=e(45);n.a.use(r.a),n.a.filter("arr2string",function(t){return t.join(" / ")}),n.a.filter("fixNum",function(t){return t?Number(t).toFixed(1):"暂无评分"}),window.t=new n.a({el:"#app",store:f.a,router:v.a,template:"<App/>",components:{App:l.a}})}],[139]);
//# sourceMappingURL=app.38c35136485eab382b9f.js.map